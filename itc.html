<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tax India | Slab Breakdown</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Plus Jakarta Sans', 'Noto Sans Devanagari', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        .app-container {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .bottom-nav-item.active {
            color: #4f46e5;
        }
        .bottom-nav-item.active svg {
            fill: rgba(79, 70, 229, 0.1);
            stroke: #4f46e5;
        }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .slab-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            font-size: 0.75rem;
            padding: 0.75rem;
            border-bottom: 1px solid #f1f5f9;
        }
        .view-content {
            transition: opacity 0.2s ease-in-out;
        }
    </style>
</head>
<body>

<div class="app-container shadow-2xl shadow-slate-200">
    
    <!-- Top Header -->
    <header class="p-6 pb-4 flex justify-between items-center border-b border-slate-50 sticky top-0 bg-white/80 backdrop-blur-md z-30">
        <div>
            <h1 id="txt-logo" class="text-xl font-extrabold text-indigo-600 tracking-tight">I.T.C</h1>
            <p id="txt-year" class="text-[9px] font-black text-slate-300 uppercase tracking-widest">FY 2025-26 Budget</p>
        </div>
        <button id="lang-toggle" class="bg-slate-100 text-slate-600 px-4 py-2 rounded-2xl text-[10px] font-black uppercase transition-all active:scale-90">
            
        </button>
    </header>

    <!-- Main View Pager -->
    <main class="flex-grow pb-24 overflow-y-auto">
        
        <!-- VIEW 1: INPUTS -->
        <div id="view-inputs" class="view-content p-6 space-y-6">
            <section>
                <label id="lbl-income" class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 block">Total Annual Income ()</label>
                <div class="relative">
                    <span class="absolute left-0 bottom-2 text-3xl font-light text-slate-300"></span>
                    <input type="number" id="inp-income" value="1500000" class="w-full pl-8 py-2 text-4xl font-black text-slate-800 border-b-2 border-slate-100 focus:border-indigo-500 outline-none transition-all">
                </div>
            </section>

            <section class="space-y-4 pt-4">
                <h3 id="lbl-deductions" class="font-bold text-slate-800 text-sm">Investments & Exemptions</h3>
                
                <div class="space-y-3">
                    <div class="bg-slate-50 p-4 rounded-3xl flex justify-between items-center">
                        <div>
                            <p id="lbl-80c" class="text-xs font-bold text-slate-600">Section 80C</p>
                            <p class="text-[9px] text-slate-400">PPF, LIC (Max 1.5L)</p>
                        </div>
                        <input type="number" id="inp-80c" value="150000" class="w-24 text-right bg-transparent font-bold text-indigo-600 outline-none">
                    </div>

                    <div class="bg-slate-50 p-4 rounded-3xl flex justify-between items-center">
                        <div>
                            <p id="lbl-80d" class="text-xs font-bold text-slate-600">Section 80D</p>
                            <p class="text-[9px] text-slate-400">Health Insurance</p>
                        </div>
                        <input type="number" id="inp-80d" value="25000" class="w-24 text-right bg-transparent font-bold text-indigo-600 outline-none">
                    </div>

                    <div class="bg-slate-50 p-4 rounded-3xl flex justify-between items-center">
                        <div>
                            <p id="lbl-hra" class="text-xs font-bold text-slate-600">HRA / Rent</p>
                            <p class="text-[9px] text-slate-400">House Rent Allowance</p>
                        </div>
                        <input type="number" id="inp-hra" value="0" class="w-24 text-right bg-transparent font-bold text-indigo-600 outline-none">
                    </div>
                </div>
            </section>

            <!-- Quick Glance Card -->
            <div class="bg-indigo-600 rounded-[2rem] p-6 text-white shadow-xl shadow-indigo-100 relative overflow-hidden">
                <p id="lbl-new-tax" class="text-[10px] font-bold uppercase tracking-widest opacity-60">New Regime Tax</p>
                <h2 id="quick-tax" class="text-3xl font-black mt-1">0</h2>
                <div class="absolute -right-4 -bottom-4 w-24 h-24 bg-white/10 rounded-full"></div>
            </div>
        </div>

        <!-- VIEW 2: COMPARISON -->
        <div id="view-compare" class="view-content hidden p-6 space-y-6">
            
            <!-- Comparison Banner -->
            <div id="banner-winner" class="bg-emerald-50 border border-emerald-100 p-5 rounded-[2rem] flex items-center gap-4">
                <div class="bg-emerald-600 text-white p-2.5 rounded-full shadow-lg">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path></svg>
                </div>
                <div>
                    <p id="lbl-recommend" class="text-[9px] font-black text-emerald-600 uppercase">Recommendation</p>
                    <p id="txt-winner" class="text-sm font-bold text-slate-800">New Regime is better</p>
                    <p class="text-xs font-medium text-emerald-700 mt-0.5"><span id="lbl-save">Saves</span> <span id="val-save" class="font-bold underline">0</span></p>
                </div>
            </div>

            <!-- Detailed Slab Table -->
            <div class="space-y-3">
                <div class="flex justify-between items-center px-1">
                    <h3 id="lbl-slab-title" class="font-bold text-slate-800 text-sm">Slab-wise Tax (New vs Old)</h3>
                    <div class="text-[9px] font-bold text-slate-400 uppercase tracking-tighter">Budget 2025-26</div>
                </div>

                <div class="bg-white border border-slate-100 rounded-3xl overflow-hidden shadow-sm">
                    <!-- Table Header -->
                    <div class="slab-grid bg-slate-50 text-slate-400 font-bold uppercase tracking-tighter text-[9px]">
                        <span id="th-slab">Income Slab</span>
                        <span id="th-new" class="text-center">New</span>
                        <span id="th-old" class="text-center">Old</span>
                    </div>
                    <!-- Table Body -->
                    <div id="slab-container" class="font-medium text-slate-600">
                        <!-- Slabs dynamically generated -->
                    </div>
                    <!-- Totals -->
                    <div class="p-4 bg-slate-900 text-white">
                        <div class="flex justify-between items-center mb-1">
                            <span id="lbl-total-tax" class="text-[10px] font-bold uppercase tracking-widest opacity-60">Total Payable</span>
                            <div class="flex gap-6 font-black text-sm">
                                <span id="final-new">0</span>
                                <span id="final-old" class="opacity-40">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notes -->
            <p id="txt-notes" class="text-[10px] text-slate-400 italic px-2 text-center">Note: Standard deduction (New: 75k, Old: 50k) and Cess are included in calculations.</p>
        </div>
    </main>

    <!-- Bottom Navigation Bar -->
    <nav class="fixed bottom-0 left-0 right-0 max-w-[480px] mx-auto bg-white/90 backdrop-blur-lg border-t border-slate-100 h-20 flex justify-around items-center px-6 z-50">
        <button onclick="switchTab('inputs')" id="nav-inputs" class="bottom-nav-item active flex flex-col items-center gap-1 group">
            <svg class="w-6 h-6 stroke-slate-400 group-active:scale-90 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
            </svg>
            <span id="nav-txt-input" class="text-[10px] font-bold uppercase tracking-widest">Inputs</span>
        </button>
        <button onclick="switchTab('compare')" id="nav-compare" class="bottom-nav-item flex flex-col items-center gap-1 group">
            <svg class="w-6 h-6 stroke-slate-400 group-active:scale-90 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
            </svg>
            <span id="nav-txt-compare" class="text-[10px] font-bold uppercase tracking-widest">Compare</span>
        </button>
    </nav>
</div>

<script>
    let lang = 'en';
    let activeTab = 'inputs';

    const t = {
        en: {
            income: "Total Annual Income ()",
            deductions: "Investments & Exemptions",
            newTax: "New Regime Tax",
            recommend: "Recommendation",
            save: "Saves",
            slabTitle: "Slab-wise Tax (New vs Old)",
            thSlab: "Income Slab",
            thNew: "New",
            thOld: "Old",
            totalTax: "Total Payable",
            navInputs: "Inputs",
            navCompare: "Compare",
            bestMsg: "{regime} is better",
            above: "Above",
            noTax: "No Tax Payable"
        },
        hi: {
            income: "   ()",
            deductions: "  ",
            newTax: "  ",
            recommend: " ",
            save: "",
            slabTitle: "  (  )",
            thSlab: " ",
            thNew: "",
            thOld: "",
            totalTax: " ",
            navInputs: "",
            navCompare: "",
            bestMsg: "{regime}   ",
            above: "",
            noTax: "  "
        }
    };

    const slabs = {
        new: [
            { l: 0, h: 400000, r: 0 },
            { l: 400000, h: 800000, r: 0.05 },
            { l: 800000, h: 1200000, r: 0.10 },
            { l: 1200000, h: 1600000, r: 0.15 },
            { l: 1600000, h: 2000000, r: 0.20 },
            { l: 2000000, h: 2400000, r: 0.25 },
            { l: 2400000, h: Infinity, r: 0.30 }
        ],
        old: [
            { l: 0, h: 250000, r: 0 },
            { l: 250000, h: 500000, r: 0.05 },
            { l: 500000, h: 1000000, r: 0.20 },
            { l: 1000000, h: Infinity, r: 0.30 }
        ]
    };

    function format(v) {
        return "" + Math.round(v).toLocaleString('en-IN');
    }

    function calculate() {
        const income = parseFloat(document.getElementById('inp-income').value) || 0;
        const d80c = Math.min(parseFloat(document.getElementById('inp-80c').value) || 0, 150000);
        const d80d = parseFloat(document.getElementById('inp-80d').value) || 0;
        const dhra = parseFloat(document.getElementById('inp-hra').value) || 0;

        const resNew = runMath(income, true, 0);
        const resOld = runMath(income, false, d80c + d80d + dhra);

        // Update UI
        document.getElementById('quick-tax').innerText = format(resNew.total);
        document.getElementById('final-new').innerText = format(resNew.total);
        document.getElementById('final-old').innerText = format(resOld.total);

        const diff = Math.abs(resNew.total - resOld.total);
        const winner = resNew.total <= resOld.total ? 'New' : 'Old';
        
        document.getElementById('val-save').innerText = format(diff);
        document.getElementById('txt-winner').innerText = t[lang].bestMsg.replace('{regime}', winner === 'New' ? (lang === 'en' ? 'New Regime' : '') : (lang === 'en' ? 'Old Regime' : ''));
        
        document.getElementById('banner-winner').className = winner === 'New' 
            ? "bg-indigo-50 border border-indigo-100 p-5 rounded-[2rem] flex items-center gap-4"
            : "bg-emerald-50 border border-emerald-100 p-5 rounded-[2rem] flex items-center gap-4";

        renderUnifiedSlabs(resNew.breakdown, resOld.breakdown);
    }

    function runMath(gross, isNew, deds) {
        const std = isNew ? 75000 : 50000;
        let taxable = Math.max(0, gross - std - deds);
        let tax = 0;
        let breakdown = [];
        const config = isNew ? slabs.new : slabs.old;

        for (let s of config) {
            let slabTax = 0;
            if (taxable > s.l) {
                let amt = Math.min(taxable, s.h) - s.l;
                slabTax = amt * s.r;
                tax += slabTax;
            }
            breakdown.push({ range: `${s.l/100000}L - ${s.h === Infinity ? '' : s.h/100000 + 'L'}`, tax: slabTax });
        }

        const rebateLimit = isNew ? 1200000 : 500000;
        if (taxable <= rebateLimit) tax = 0;

        const total = tax + (tax * 0.04);
        return { total, breakdown };
    }

    function renderUnifiedSlabs(newB, oldB) {
        const container = document.getElementById('slab-container');
        container.innerHTML = '';
        
        // Find max length to iterate
        const len = Math.max(newB.length, oldB.length);
        for(let i = 0; i < len; i++) {
            const div = document.createElement('div');
            div.className = "slab-grid";
            
            // Logic to merge slab labels or show ranges
            let label = "";
            if(newB[i] && oldB[i]) {
                // Approximate merging logic for visual comparison
                label = newB[i].range;
            } else {
                label = (newB[i] || oldB[i]).range;
            }

            const nTax = newB[i] ? format(newB[i].tax) : '-';
            const oTax = oldB[i] ? format(oldB[i].tax) : '-';

            div.innerHTML = `
                <span class="text-slate-400 font-bold">${label}</span>
                <span class="text-center font-black ${newB[i]?.tax > 0 ? 'text-indigo-600' : 'text-slate-200'}">${nTax}</span>
                <span class="text-center font-bold ${oldB[i]?.tax > 0 ? 'text-slate-700' : 'text-slate-200'}">${oTax}</span>
            `;
            container.appendChild(div);
        }
    }

    function switchTab(target) {
        activeTab = target;
        document.getElementById('view-inputs').classList.toggle('hidden', target !== 'inputs');
        document.getElementById('view-compare').classList.toggle('hidden', target !== 'compare');
        
        document.getElementById('nav-inputs').classList.toggle('active', target === 'inputs');
        document.getElementById('nav-compare').classList.toggle('active', target === 'compare');
        
        if(target === 'compare') calculate();
    }

    function toggleLang() {
        lang = lang === 'en' ? 'hi' : 'en';
        document.getElementById('lang-toggle').innerText = lang === 'en' ? '' : 'English';
        
        const s = t[lang];
        document.getElementById('lbl-income').innerText = s.income;
        document.getElementById('lbl-deductions').innerText = s.deductions;
        document.getElementById('lbl-new-tax').innerText = s.newTax;
        document.getElementById('lbl-recommend').innerText = s.recommend;
        document.getElementById('lbl-save').innerText = s.save;
        document.getElementById('lbl-slab-title').innerText = s.slabTitle;
        document.getElementById('th-slab').innerText = s.thSlab;
        document.getElementById('th-new').innerText = s.thNew;
        document.getElementById('th-old').innerText = s.thOld;
        document.getElementById('lbl-total-tax').innerText = s.totalTax;
        document.getElementById('nav-txt-input').innerText = s.navInputs;
        document.getElementById('nav-txt-compare').innerText = s.navCompare;
        
        calculate();
    }

    // Input listeners
    ['inp-income', 'inp-80c', 'inp-80d', 'inp-hra'].forEach(id => {
        document.getElementById(id).addEventListener('input', calculate);
    });
    document.getElementById('lang-toggle').addEventListener('click', toggleLang);

    window.onload = calculate;
</script>

</body>
</html>

